<% suppress = precondition[:negation] && precondition[:preconditions].length == 1 %>
<% unless suppress %>
  <ul id="precondition_<%= precondition[:id] %>">
    <li>
      <% reference = ("precondition_"+parent_precondition[:id].to_s) %>
      <% rat_ref = @rationale[reference] %>
      <% if rat_ref.is_a?(Hash) &&
            (@specifics[@population_key] || @population_key == 'VAR') %>
        <% rat_ref = rat_ref[:results].count > 0 %>
        <% if @population_key != 'VAR' &&
              @updated_rationale[@population_key] &&
              @updated_rationale[@population_key].key?(reference) %>
          *<% rat_ref = @updated_rationale[@population_key][reference]  %>
        <% end %>
      <% end %>

      <span class="conjunction <%= parent_precondition[:id] %> rationale eval-<%= rat_ref %>">
        <b>
          <% if parent_negation %>
            <% if parent_precondition[:conjunction_code]=='allTrue' %>OR NOT<% end %>
            <% if parent_precondition[:conjunction_code]=='atLeastOneTrue' %>AND NOT<% end %>
          <% else %>
            <% if parent_precondition[:conjunction_code]=='allTrue' %>AND<% end %>
            <% if parent_precondition[:conjunction_code]=='atLeastOneTrue' %>OR<% end %>
          <% end %>
        </b>
        <span class="sr-only sr-highlight-status"></span>
      </span>
<% end %>

<% if precondition[:preconditions] %>
  <% precondition[:preconditions].each do |prec| %>
    <%= render partial: 'precondition', locals: {precondition: prec, parent_precondition:precondition, parent_negation: precondition[:negation], measure: measure} %>
  <% end %>
<% else %>
  <%= render partial: 'data_criteria', locals: {reference: precondition[:reference], expand_variable: false, measure: measure, negatedParent: parent_negation,tag: "span"} %>
<% end %>

<% unless suppress %>
    </li>
  </ul>
<% end %>
